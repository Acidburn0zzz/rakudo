<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="svg2" width="361.443" height="419.122" version="1.0"><title id="title3260">Rakudo Perl 6 Architecture</title><metadata id="metadata106"/><a id="a66" target="_top" transform="matrix(0.5,0,0,0.5,17.715316,-37.789196)" xlink:href="architecture.html#core-setting"><rect id="rect2569" width="188.608" height="163.093" x="-16.332" y="165.952" fill="#7fff29" fill-opacity="1" fill-rule="evenodd" stroke="none" stroke-linecap="butt" stroke-linejoin="miter" stroke-opacity="1" stroke-width="1.224"/><text font-family="Bitstream Vera Sans" style="text-align:center" id="text2571" x="78.423" y="239.868" fill="#000" fill-opacity="1" stroke="none" font-size="26" font-style="normal" font-weight="normal" text-anchor="middle" xml:space="preserve"><tspan id="tspan2573" x="78.423" y="239.868">Core setting</tspan><tspan id="tspan2577" x="78.423" y="272.367">(Perl 6)</tspan></text></a><a id="a3082" target="_top" transform="matrix(1,0,0,0.53827803,0,20.606619)" xlink:href="architecture.html#the-world"><g id="g3075"><rect id="rect3083" width="47.906" height="153.911" x="308.537" y="44.63" fill="#fffa68" fill-opacity="1" stroke="none"/></g></a><path id="path3281" fill="#fb5" fill-opacity="1" stroke="none" stroke-width="10" d="m 221.90337,68.662839 -4.85708,5.725256 c 5.79787,4.930575 7.93163,12.893817 5.3733,20.06186 l 7.06271,2.53413 c 3.59927,-10.084597 0.578,-21.384496 -7.57893,-28.321246 z" baseline-shift="baseline" color="#000" direction="ltr" display="inline" enable-background="accumulate" font-family="Sans" font-size="medium" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="normal" overflow="visible" text-anchor="start" text-decoration="none" visibility="visible" word-spacing="normal" writing-mode="lr-tb" style="text-indent:0;text-align:start;line-height:normal;text-transform:none;block-progression:tb;marker:none;-inkscape-font-specification:Sans"/><a id="a61" target="_top" transform="matrix(0.5,0,0,0.5,12.2667,-77.083296)" xlink:href="architecture.html#parser"><desc id="desc3046">The Perl 6 source code is transformed in various stages. The first one is the parser stage, which creates a parse tree out of the Perl 6 source code. The parser stage is implemented in &quot;Not Quite Perl 6&quot; (NQP) and is part of Rakudo and hosted in the Rakudo repository.</desc><title id="title3044">Parser (NQP)</title><path id="rect2383" fill="#72abff" fill-opacity="1" fill-rule="evenodd" stroke="none" d="m 221.18207,243.92645 333.35034,0 0,61.61931 -333.35034,0 z"/><text id="Parser-text" x="311.263" y="281.905" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="24" font-style="normal" font-weight="normal" xml:space="preserve"><tspan id="tspan2565" x="311.263" y="281.905" font-size="24">Parser (NQP)</tspan></text></a><path id="path3281-5" fill="#fb5" fill-opacity="1" stroke="none" stroke-width="10" d="m 185.44006,71.736644 c -8.33601,9.945044 -7.96689,24.635909 0.86818,34.140366 l 5.51408,-5.11519 c -6.29714,-6.774233 -6.57497,-17.1033 -0.63354,-24.191558 l -5.74872,-4.833618 z" baseline-shift="baseline" color="#000" direction="ltr" display="inline" enable-background="accumulate" font-family="Sans" font-size="medium" font-stretch="normal" font-style="normal" font-variant="normal" font-weight="normal" letter-spacing="normal" overflow="visible" text-anchor="start" text-decoration="none" visibility="visible" word-spacing="normal" writing-mode="lr-tb" style="text-indent:0;text-align:start;line-height:normal;text-transform:none;block-progression:tb;marker:none;-inkscape-font-specification:Sans"/><path id="path5828" fill="#fb5" fill-rule="evenodd" stroke="#fb5" stroke-width="2.002" d="m 191.78681,68.578408 0.33261,15.000043 -13.16472,-7.225133 12.83211,-7.77491 z"/><a id="action-methods" target="_top" transform="matrix(0.5,0,0,0.5,12.266679,-97.23971)" xlink:href="architecture.html#action-methods"><desc id="desc3064">The action methods are applied to the parse tree at the same time as the parser builds it. The result of this process is the Abstract Syntax Tree that is sent to the QAST compiler.</desc><title id="title3062">Action methods (NQP)</title><path id="rect2387" fill="#72abff" fill-opacity="1" fill-rule="evenodd" stroke="none" d="m 221.18207,386.29776 333.35034,0 0,61.6193 -333.35034,0 z"/><text id="text2559" x="244.27" y="425.307" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="26.117" font-style="normal" font-weight="normal" xml:space="preserve"><tspan id="tspan2561" x="244.27" y="425.307">Action methods (NQP)</tspan></text></a><path id="path5836" fill="#fb5" fill-rule="evenodd" stroke="#fb5" stroke-width="2.002" d="m 224.59991,102.21058 -5.18083,-14.080874 14.79664,2.563577 -9.61581,11.517297 z"/><path id="rect2463" fill="#fb5" d="m 173.92967,5.2812122 0,17.9062498 -18.5,0.03125 51.6875,19.5625 49.84375,-19.78125 -18.53125,0.03125 0,-17.7499998 -64.5,0 z"/><text font-family="Bitstream Vera Sans" style="text-align:center" id="text2473" x="206.189" y="16.676" fill="#000" fill-opacity="1" stroke="none" font-size="12.365" font-style="normal" font-weight="normal" text-anchor="middle" xml:space="preserve"><tspan id="tspan2475" x="206.189" y="16.676">Perl 6</tspan><tspan id="tspan2483" x="206.189" y="32.133">source</tspan></text><g id="g4134" transform="translate(-9.9999997,0)"><path id="rect2437" fill="#fb5" d="m 173.92967,128.09875 0,17.9375 -18.5,0.0313 51.6875,19.53125 49.84375,-19.78125 -18.53125,0.0313 0,-17.75 -64.5,0 z"/><text id="text2493" x="171.371" y="156.271" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="18.044" font-style="normal" font-weight="normal" transform="scale(1.0498159,0.95254797)" xml:space="preserve"><tspan id="tspan2495" x="171.371" y="156.271">QAST</tspan></text></g><a id="a41" target="_top" transform="matrix(0.24634516,0,0,0.24634516,187.40789,37.189413)" xlink:href="architecture.html#pirt-serializer"><rect id="rect2391" width="333.35" height="61.619" x="221.182" y="675.179" fill="#72abff" fill-opacity="1" fill-rule="evenodd" stroke="none"/><text id="text2547" x="254.032" y="714.189" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="26.117" font-style="normal" font-weight="normal" xml:space="preserve"><tspan id="tspan2549" x="254.032" y="714.189">PIRT serializer (NQP)</tspan></text></a><a id="a46" target="_top" transform="matrix(0.24634516,0,0,0.24634516,187.40789,36.032696)" xlink:href="architecture.html#qast-compiler"><rect id="rect2389" width="333.35" height="61.619" x="221.182" y="531.577" fill="#72abff" fill-opacity="1" fill-rule="evenodd" stroke="none"/><text id="text2551" x="249.48" y="569.592" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="26.117" font-style="normal" font-weight="normal" xml:space="preserve"><tspan id="tspan2553" x="249.48" y="569.592">QAST compiler (NQP)</tspan></text></a><a id="a51" target="_top" transform="matrix(0.24634516,0,0,0.24634516,187.40789,37.183128)" xlink:href="architecture.html#imcc"><rect id="rect2393" width="333.35" height="61.619" x="221.182" y="818.782" fill="#0ff" fill-opacity="1" fill-rule="evenodd" stroke="none"/><text id="text2555" x="330.828" y="858.139" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="26.117" font-style="normal" font-weight="normal" xml:space="preserve"><tspan id="tspan2557" x="330.828" y="858.139">IMCC (C)</tspan></text></a><path id="rect2443" fill="#fb5" d="m 267.05768,184.00672 0,8.82223 -9.11477,0.0154 25.46593,9.62286 24.55754,-9.73063 -9.13017,0.0154 0,-8.74526 -31.77853,0 z"/><text id="text2501" x="259.6" y="203.792" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="8.89" font-style="normal" font-weight="normal" transform="scale(1.0498159,0.95254797)" xml:space="preserve"><tspan id="tspan2503" x="259.6" y="203.792">PIRT</tspan></text><path id="rect2449" fill="#fb5" d="m 267.05768,219.37612 0,8.83763 -9.11477,0.0154 25.46593,9.62286 24.55754,-9.74603 -9.13017,0.0154 0,-8.74525 -31.77853,0 z"/><text id="text2525" x="267.008" y="236.767" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="9.055" font-style="normal" font-weight="normal" transform="scale(1.0306645,0.97024783)" xml:space="preserve"><tspan id="tspan2527" x="267.008" y="236.767">PIR</tspan></text><a id="a101" target="_top" transform="matrix(0.24634516,0,0,0.24634516,187.4079,37.029676)" xlink:href="architecture.html#parrot-runtime"><desc id="desc3042">The POST compiler emits PIR, which IMCC transforms into byte code. IMCC is parrot&apos;s PIR compiler, written in C and statically linked into parrot. The byte code (PBC) can then be stored to disk, or executed in memory by a so-called run core or run loop, which is in some sense the heart of parrot - or one of the hearts, because there are several different ones available (one for just-in-time compilation (JIT), one for debugging etc.). There are also some supporting custom types and operations in Rakudo called dynamic PMCs and dynamic ops which are written in C, and helper functions written in other languages (namely NQP and PIR). Those do not show up in the flow chart.</desc><title id="title3040">Parrot runtime (C)</title><rect id="rect2707" width="333.35" height="61.619" x="221.182" y="962.981" fill="#0ff" fill-opacity="1" fill-rule="evenodd" stroke="none"/><text id="text2709" x="269.922" y="1001.978" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="26.117" font-style="normal" font-weight="normal" xml:space="preserve"><tspan id="tspan2711" x="269.922" y="1001.978">Parrot runtime (C)</tspan></text></a><path id="rect2531" fill="#fb5" d="m 267.05768,254.74551 0,8.82224 -9.11477,0.0154 25.46593,9.62286 24.55754,-9.73064 -9.11477,0.0154 0,-8.74525 -31.79393,0 z"/><text id="text2539" x="260.577" y="278.172" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="8.89" font-style="normal" font-weight="normal" transform="scale(1.0498159,0.95254797)" xml:space="preserve"><tspan id="tspan2541" x="260.577" y="278.172">PBC</tspan></text><a id="a3110" target="_top" transform="matrix(0.49269032,0,0,0.49269032,181.36422,85.524288)" xlink:href="architecture.html#pmc-dynops"><g id="g3104"><rect id="rect3083-4" width="47.906" height="103.1" x="308.537" y="311.022" fill="#5f9" fill-opacity="1" stroke="none"/><text id="text3853-9" x="-362.368" y="327.819" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="13.05" font-style="normal" font-weight="normal" letter-spacing="0" text-anchor="middle" transform="matrix(0,-1,1,0,0,0)" word-spacing="0" xml:space="preserve" style="text-align:center;line-height:125%"><tspan id="tspan3855-2" x="-362.368" y="327.819">PMC &amp;</tspan><tspan id="tspan3229" x="-362.368" y="344.132">dynops (C)</tspan></text></g></a><path id="rect2437-7-3-2-2" fill="#fb5" d="m 331.36634,242.6238 -2.14146,0 -0.004,-2.20861 -3.86162,6.17068 3.89147,5.95057 -0.004,-2.21235 3.37987,0 0,-7.70029 z"/><path id="rect2437-7-3-2-4" fill="#fb5" d="m 331.36634,277.99321 -2.14146,0 -0.004,-2.20861 -3.86162,6.17068 3.89147,5.95056 -0.004,-2.21234 3.37987,0 0,-7.70029 z"/><path id="rect2652" fill="#f95" d="m 105.27101,64.909756 8.03125,0 0,4.0625 9.34375,-8.6875 -9.34375,-8.6875 0,4.03125 -8.03125,0 z"/><path id="rect2652-6" fill="#f95" d="m 105.27101,115.93899 8.03125,0 0,4.0625 9.34375,-8.6875 -9.34375,-8.6875 0,4.03125 -8.03125,0 z"/><g id="g6056" transform="translate(-2.4649472,-2.358656)"><path id="rect2652-0" fill="#f95" d="m 292.81255,58.580862 8.03125,0 0,4.0625 9.34375,-8.6875 -9.34375,-8.6875 0,4.03125 -8.03125,0 z"/><path id="rect2652-0-5" fill="#f95" d="m 310.18755,75.955963 -8.03125,0 0,4.0625 -9.34375,-8.6875 9.34375,-8.6875 0,4.03125 8.03125,0 z"/></g><g id="g6052" transform="translate(-2.4649472,0.202175)"><path id="rect2652-7" fill="#f95" d="m 292.81255,107.04927 8.03125,0 0,4.0625 9.34375,-8.6875 -9.34375,-8.6875 0,4.03125 -8.03125,0 z"/><path id="rect2652-0-9" fill="#f95" d="m 310.18755,124.42437 -8.03125,0 0,4.0625 -9.34375,-8.6875 9.34375,-8.6875 0,4.03125 8.03125,0 z"/></g><g id="g4077" transform="translate(-1.1767883,-0.378354)"><a id="a41-1" target="_top" transform="matrix(0.24634516,0,0,0.24634516,96.240561,36.40476)" xlink:href="/home/moritz/p6/rakudo/architecture.html#pirt-serializer"><rect id="rect2391-3" width="333.35" height="61.619" x="221.182" y="675.179" fill="#72abff" fill-opacity="1" fill-rule="evenodd" stroke="none"/><text id="text2547-6" x="254.032" y="714.189" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="26.117" font-style="normal" font-weight="normal" xml:space="preserve"><tspan id="tspan2549-9" x="254.032" y="714.189">JAST serializer (NQP)</tspan></text></a><a id="a46-9" target="_top" transform="matrix(0.24634516,0,0,0.24634516,96.240561,36.41105)" xlink:href="/home/moritz/p6/rakudo/architecture.html#qast-compiler"><rect id="rect2389-6" width="333.35" height="61.619" x="221.182" y="531.577" fill="#72abff" fill-opacity="1" fill-rule="evenodd" stroke="none"/><text id="text2551-6" x="249.48" y="569.592" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="26.117" font-style="normal" font-weight="normal" xml:space="preserve"><tspan id="tspan2553-1" x="249.48" y="569.592">QAST compiler (NQP)</tspan></text></a><a id="a51-2" target="_top" transform="matrix(0.24634516,0,0,0.24634516,96.615561,36.14848)" xlink:href="/home/moritz/p6/rakudo/architecture.html#imcc"><rect id="rect2393-6" width="333.35" height="61.619" x="221.182" y="818.782" fill="#0ff" fill-opacity="1" fill-rule="evenodd" stroke="none"/><text id="text2555-9" x="249.134" y="855.602" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="26.117" font-style="normal" font-weight="normal" xml:space="preserve"><tspan id="tspan2557-1" x="249.134" y="855.602">Java Virtual Machine</tspan></text></a><path id="rect2443-7" fill="#fb5" d="m 175.89035,183.22207 0,8.82223 -9.11477,0.0154 25.46593,9.62286 24.55754,-9.73063 -9.13017,0.0154 0,-8.74526 -31.77853,0 z"/><text id="text2501-4" x="172.759" y="202.968" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="8.89" font-style="normal" font-weight="normal" transform="scale(1.0498159,0.95254797)" xml:space="preserve"><tspan id="tspan2503-1" x="172.759" y="202.968">JAST</tspan></text><path id="rect2449-0" fill="#fb5" d="m 175.89035,218.59147 0,8.83763 -9.11477,0.0154 25.46593,9.62286 24.55754,-9.74603 -9.13017,0.0154 0,-8.74525 -31.77853,0 z"/><text id="text2525-3" x="178.554" y="235.958" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="9.055" font-style="normal" font-weight="normal" transform="scale(1.0306645,0.97024783)" xml:space="preserve"><tspan id="tspan2527-1" x="178.554" y="235.958">JVM</tspan></text></g><text id="text3980" x="-122.329" y="328.758" fill="#000" fill-opacity="1" stroke="none" font-family="Sans" font-size="12" font-style="normal" font-weight="normal" letter-spacing="0" transform="matrix(0,-1,1,0,0,0)" word-spacing="0" xml:space="preserve" style="line-height:125%"><tspan id="tspan3982" x="-122.329" y="328.758">Perl6::World</tspan><tspan id="tspan3984" x="-122.329" y="343.758">(NQP)</tspan></text><g id="g4058"><a id="a41-1-1" target="_top" transform="matrix(0.24634516,0,0,0.24634516,2.9071399,36.026406)" xlink:href="/home/moritz/p6/rakudo/architecture.html#pirt-serializer"><rect id="rect2391-3-1" width="333.35" height="61.619" x="221.182" y="675.179" fill="#72abff" fill-opacity="1" fill-rule="evenodd" stroke="none"/><text id="text2547-6-9" x="254.032" y="714.189" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="26.117" font-style="normal" font-weight="normal" xml:space="preserve"><tspan id="tspan2549-9-2" x="254.032" y="714.189">MAST serializer (NQP)</tspan></text></a><a id="a46-9-4" target="_top" transform="matrix(0.24634516,0,0,0.24634516,2.9071399,36.032696)" xlink:href="/home/moritz/p6/rakudo/architecture.html#qast-compiler"><rect id="rect2389-6-5" width="333.35" height="61.619" x="221.182" y="531.577" fill="#72abff" fill-opacity="1" fill-rule="evenodd" stroke="none"/><text id="text2551-6-0" x="249.48" y="569.592" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="26.117" font-style="normal" font-weight="normal" xml:space="preserve"><tspan id="tspan2553-1-3" x="249.48" y="569.592">QAST compiler (NQP)</tspan></text></a><rect id="rect2393-6-3" width="82.119" height="15.18" x="57.769" y="237.473" fill="#0ff" fill-opacity="1" fill-rule="evenodd" stroke="none"/><text id="text2555-9-5" x="85.81" y="247.362" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="6.434" font-style="normal" font-weight="normal" xml:space="preserve"><tspan id="tspan2557-1-9" x="85.81" y="247.362">MoarVM</tspan></text><path id="rect2443-7-0" fill="#fb5" d="m 82.556929,182.84371 0,8.82223 -9.11477,0.0154 25.46593,9.62286 24.557541,-9.73063 -9.13017,0.0154 0,-8.74526 -31.778531,0 z"/><text id="text2501-4-6" x="83.854" y="202.571" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="8.89" font-style="normal" font-weight="normal" transform="scale(1.0498159,0.95254797)" xml:space="preserve"><tspan id="tspan2503-1-8" x="83.854" y="202.571">MAST</tspan></text><path id="rect2449-0-6" fill="#fb5" d="m 82.556929,218.21311 0,8.83763 -9.11477,0.0154 25.46593,9.62286 24.557541,-9.74603 -9.13017,0.0154 0,-8.74525 -31.778531,0 z"/><text id="text2525-3-2" x="83.295" y="235.568" fill="#000" fill-opacity="1" stroke="none" font-family="Bitstream Vera Sans" font-size="9.055" font-style="normal" font-weight="normal" transform="scale(1.0306645,0.97024783)" xml:space="preserve"><tspan id="tspan2527-1-9" x="83.295" y="235.568">moar</tspan></text></g></svg>